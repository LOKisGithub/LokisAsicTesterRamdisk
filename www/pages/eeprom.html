<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="cache-control" content="no-cache" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/cascade.css" />
<!--[if IE 6]><link rel="stylesheet" type="text/css" media="screen" href="/css/ie6.css" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" type="text/css" media="screen" href="/css/ie7.css" /><![endif]-->
<!--[if IE 8]><link rel="stylesheet" type="text/css" media="screen" href="/css/ie8.css" /><![endif]-->
<script type="text/javascript" src="/js/xhr.js"></script>
<script type="text/javascript" src="/js/jquery-1.10.2.js"></script>
<script type="text/javascript" src="/js/json2.min.js"></script>
<script>

function f_list_eeprom() {

  $.ajax({
    url:'/cgi-bin/list_eeprom.cgi',
    type:'GET',
    dataType: 'text',
    success: function( data ) {
        var HTML = ""; 
        var json = JSON.parse(data);
        $.each(json, function(i, value) { 
			if (value != "dummy" && value != "none") {
				if (!HTML.includes("<option>"+value+"</option>")) { 
					HTML = HTML+"<option>"+value+"</option>";
				} else {
					HTML = HTML.replaceAll("<option>"+value+"</option>", "<option selected>"+value+"</option>");
				} 
			}
        });
        $('#selectEeprom').append(HTML); 
    }
  });
}


function f_eeprom_dump() {
	$.ajax({
		url: '/cgi-bin/eeprom_dump.cgi',
		type: 'GET',
		dataType: 'text',
		timeout: 30000,
		cache: false,
		success: function(data) {
			$("#syslog").val(data);
		},
		error: function() {
			//alert('Ajax Error');
		}
	});
}

function f_submit_pressTestButton() {	
	$.ajax({
		url: '/cgi-bin/testButton.cgi',
		type: 'GET',
		dataType: 'json',
		timeout: 30000,
		cache: false,
		data: {},
		success: function(data) {
		},
		error: function() {
		}
	});
}

function f_submit_write_eeprom_exec() {
	$("#write_eeprom_form").attr("action", "/cgi-bin/eeprom_write.cgi");
	write_eeprom_form.submit();
}

function f_submit_write_eeprom() {
	if(confirm('Are you sure you want to program the eeprom?')) {		
		setTimeout(function(){
			f_submit_write_eeprom_exec();
		}, 100);
	}
}

$(document).ready(function() {
   f_list_eeprom();
});

</script>
<title>LOKi's Asic Tester</title>
</head>
<body class="lang_en">
	<p class="skiplink">
		<span id="skiplink1"><a href="#navigation">Skip to navigation</a></span>
		<span id="skiplink2"><a href="#content">Skip to content</a></span>
	</p>
	<div id="menubar">
		<h2 class="navigation"><a id="navigation" name="navigation">Navigation</a></h2>
		<div class="clear"></div>
	</div>
	<div id="menubar" style="background-color: #0a2b40;">
		<div class="hostinfo" style="float: left; with: 500px;">
			<img src="/images/antminer_logo.png" width="92" height="50" alt="" title="" border="0" />
		</div>
		<div class="clear"></div>
	</div>
	<div id="maincontainer">
		<div id="tabmenu">
			<div class="tabmenu1">
				<ul class="tabmenu l1">
					<li class="tabmenu-item-status"><a href="/index.html">System</a></li>
<!--					<li class="tabmenu-item-system"><a href="/cgi-bin/minerConfiguration.cgi">Miner Configuration</a></li>
					<li class="tabmenu-item-network"><a href="/cgi-bin/minerStatus.cgi">Miner Status</a></li>-->
					<li class="tabmenu-item-system"><a href="/network.html">Network</a></li>
					<li class="tabmenu-item-network active"><a href="/tester.html">Tester</a></li>
				</ul>
				<br style="clear: both" />
				<div class="tabmenu2">
					<ul class="tabmenu l2">
						<li class="tabmenu-item-system"><a href="/tester.html">Testlog</a></li>
						<li class="tabmenu-item-packages"><a href="/testKernelLog.html">Kernel Log</a></li>
						<li class="tabmenu-item-packages"><a href="/eeprom.html">EEPROM</a></li>
					</ul>
					<br style="clear: both" />
				</div>
			</div>
		</div>
		<div id="maincontent">
			<noscript>
				<div class="errorbox">
					<strong>Java Script required!</strong><br /> You must enable Java Script in your browser or LuCI will not work properly.
				</div>
			</noscript>
			<h2 style="padding-bottom:10px;"><a id="content" name="content" href=tester.log download>Testlog (download)</a></h2>
			<p>
				<form id="write_eeprom_form" name="write_eeprom_form" action="/cgi-bin/eeprom_write.cgi" enctype="multipart/form-data" method="post">
					<select name="selectChain" id="selectChain"><option selected>0</option><option>1</option><option>2</option></select>
					<input type="file" name="datafile" />
					<input class="cbi-button cbi-input-apply" type="button" onclick="f_submit_write_eeprom();" value="Write eeprom" />
				</form>
				<form action="/cgi-bin/eeprom_dump.cgi">
					<select name="selectChain" id="selectChain"><option selected>0</option><option>1</option><option>2</option></select>
					<input class="cbi-button cbi-button-save left" type="submit" value="Dump eeprom" />
				</form>
			</p>

			<div id="content_syslog">
				<textarea readonly="readonly" wrap="off" id="syslog" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'></textarea>
			</div>
			<div class="clear"></div>
		</div>	
	</div>
	<div class="clear"></div>
	<div style="text-align: center; bottom: 0; left: 0; height: 1.5em; font-size: 80%; margin: 0; padding: 5px 0px 2px 8px; background-color: #918ca0; width: 100%;">
		<font style="color:#fff;">Copyright &copy; 2022, LOKi</font>
	</div>
</body>
</html>

